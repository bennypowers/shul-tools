{"version":3,"file":"HebCalDay.js","sourceRoot":"","sources":["HebCalDay.ts"],"names":[],"mappings":"AAAA,OAAO,EAEL,KAAK,EACL,cAAc,EACd,QAAQ,IAAI,cAAc,EAC1B,MAAM,EACN,WAAW,EACX,mBAAmB,EACnB,aAAa,GACd,MAAM,cAAc,CAAC;AAEtB;;;;;GAKG;AACH,MAAM,KAAK,GAAG;IACZ,6BAA6B;IAC7B,IAAI,EAAE,QAAQ;IACd,8CAA8C;IAC9C,aAAa,EAAE,QAAQ;IACvB,uCAAuC;IACvC,YAAY,EAAE,QAAQ;IACtB,qDAAqD;IACrD,SAAS,EAAE,QAAQ;IACnB,8BAA8B;IAC9B,OAAO,EAAE,QAAQ;IACjB,iEAAiE;IACjE,mBAAmB,EAAE,QAAQ;IAC7B,mCAAmC;IACnC,gBAAgB,EAAE,QAAQ;IAC1B,oDAAoD;IACpD,YAAY,EAAE,QAAQ;IACtB,wDAAwD;IACxD,UAAU,EAAE,QAAQ;IACpB,oCAAoC;IACpC,eAAe,EAAE,QAAQ;IACzB,iCAAiC;IACjC,eAAe,EAAE,QAAQ;IACzB,mCAAmC;IACnC,QAAQ,EAAE,QAAQ;IAClB,uBAAuB;IACvB,UAAU,EAAE,QAAQ;IACpB,uCAAuC;IACvC,cAAc,EAAE,QAAQ;IACxB,iCAAiC;IACjC,UAAU,EAAE,QAAQ;IACpB,0CAA0C;IAC1C,iBAAiB,EAAE,QAAQ;IAC3B,YAAY;IACZ,KAAK,EAAE,QAAQ;IACf,qCAAqC;IACrC,UAAU,EAAE,QAAQ;IACpB,gDAAgD;IAChD,WAAW,EAAE,QAAQ;IACrB,sEAAsE;IACtE,aAAa,EAAE,QAAQ;IACvB,8CAA8C;IAC9C,IAAI,EAAE,QAAQ;IACd,yDAAyD;IACzD,WAAW,EAAE,QAAQ;IACrB,kBAAkB;IAClB,WAAW,EAAE,QAAQ;IACrB,uFAAuF;IACvF,gBAAgB,EAAE,QAAQ;IAC1B,kDAAkD;IAClD,eAAe,EAAE,SAAS;IAC1B,gBAAgB;IAChB,SAAS,EAAE,SAAS;CACrB,CAAC;AA8CF,SAAS,aAAa,CAAC,CAAc;IACnC,OAAO,CAAC,YAAY,WAAW,CAAC;AAClC,CAAC;AAED,SAAS,qBAAqB,CAAC,CAAc;IAC3C,OAAO,CAAC,YAAY,mBAAmB,CAAC;AAC1C,CAAC;AAED,SAAS,eAAe,CAAC,CAAc;IACrC,OAAO,CAAC,YAAY,aAAa,CAAC;AACpC,CAAC;AAGD,MAAM,kBAAkB,GAAG,KAAK,CAAC;AAEjC,MAAM,iBAAiB,GAAG,GAAG,CAAC;AAE9B,MAAM,WAAW;IACf,MAAM,CAAU,WAAW,GAAG;QAC5B,eAAe;QACf,YAAY;QACZ,SAAS;QACT,gBAAgB;QAChB,aAAa;QACb,kBAAkB;QAClB,eAAe;QACf,cAAc;QACd,cAAc;QACd,cAAc;QACd,QAAQ;QACR,OAAO;KACC,CAAC;IAEF,aAAa,CAAO;IAEpB,UAAU,CAAO;IAEjB,OAAO,CAAO;IAEd,cAAc,CAAO;IAErB,WAAW,CAAO;IAElB,gBAAgB,CAAO;IAEvB,aAAa,CAAO;IAEpB,YAAY,CAAO;IAEnB,YAAY,CAAO;IAEnB,YAAY,CAAO;IAEnB,MAAM,CAAO;IAEb,KAAK,CAAO;IAErB,KAAK,GAAG,IAAI,GAAG,EAAuB,CAAC;IAEvC,YACE,GAAS,EACT,GAAW,EACX,IAAY,EACZ,QAAQ,GAAG,kBAAkB;QAE7B,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QAC1C,IAAI,cAAc,GAAG,KAAK,CAAA;QAC1B,KAAK,MAAM,GAAG,IAAI,WAAW,CAAC,WAAW,EAAE;YACzC,MAAM,IAAI,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,KAAK,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YAC/D,MAAM,IAAI,GAAG,IAAI,GAAG,GAAG,CAAC;YACxB,MAAM,IAAI,GAAG,cAAc,IAAI,CAAC,IAAI,CAAC;YACrC,cAAc,GAAG,IAAI,IAAI,CAAC,IAAI,CAAA;YAC9B,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;SAC3C;IACH,CAAC;IAED,GAAG,CAAC,GAAc,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IAEzD,MAAM,CAAC,GAAc,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IAE5D,MAAM,CAAC,GAAc,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IAE5D,GAAG,CAAI,EAID;QACJ,OAAO,KAAK,CAAC,IAAI,CACf,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,EACpB,CAAC,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAC7D,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IACZ,CAAC;;AAGH,MAAM,OAAO,SAAS;IACpB,MAAM,CAAU,IAAI,GAA6B;QAC/C,OAAO,EAAE;YACP,aAAa,EAAE,WAAW;YAC1B,UAAU,EAAE,QAAQ;YACpB,OAAO,EAAE,IAAI;YACb,cAAc,EAAE,cAAc;YAC9B,WAAW,EAAE,cAAc;YAC3B,gBAAgB,EAAE,kBAAkB;YACpC,aAAa,EAAE,kBAAkB;YACjC,MAAM,EAAE,OAAO;YACf,YAAY,EAAE,YAAY;YAC1B,YAAY,EAAE,WAAW;YACzB,YAAY,EAAE,WAAW;YACzB,KAAK,EAAE,aAAa;YACpB,OAAO,EAAE,KAAK;YACd,IAAI,EAAE,SAAS;YACf,MAAM,EAAE,MAAM;YACd,GAAG,EAAE,KAAK;YACV,GAAG,EAAE,GAAG;YACR,cAAc,EAAE,YAAY;YAC5B,IAAI,EAAE;gBACJ,WAAW;gBACX,SAAS;gBACT,WAAW;gBACX,WAAW;gBACX,WAAW;gBACX,UAAU;gBACV,cAAc;aACf;SACF;QACD,OAAO,EAAE;YACP,aAAa,EAAE,MAAM;YACrB,UAAU,EAAE,YAAY;YACxB,OAAO,EAAE,SAAS;YAClB,cAAc,EAAE,qBAAqB;YACrC,WAAW,EAAE,8BAA8B;YAC3C,gBAAgB,EAAE,wBAAwB;YAC1C,aAAa,EAAE,iCAAiC;YAChD,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE,eAAe;YAC7B,YAAY,EAAE,eAAe;YAC7B,YAAY,EAAE,eAAe;YAC7B,KAAK,EAAE,WAAW;YAClB,OAAO,EAAE,SAAS;YAClB,IAAI,EAAE,SAAS;YACf,MAAM,EAAE,oBAAoB;YAC5B,GAAG,EAAE,OAAO;YACZ,GAAG,EAAE,MAAM;YACX,cAAc,EAAE,cAAc;YAC9B,IAAI,EAAE;gBACJ,QAAQ;gBACR,QAAQ;gBACR,SAAS;gBACT,WAAW;gBACX,UAAU;gBACV,QAAQ;gBACR,SAAS;aACV;SACF;KACF,CAAA;IAED;QACE,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAClC,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAClC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC1C,CAAC;IAED,KAAK,GAAG,KAAK,CAAC;IAEd,IAAI,CAAO;IAEX,MAAM,GAAG,OAAO,CAAC;IAEjB,IAAI,CAAS;IAEb,QAAQ,CAAS;IAEjB,SAAS,CAAS;IAElB,QAAQ,GAAG,iBAAiB,CAAC;IAE7B,kBAAkB,CAAS;IAE3B,YAAY,CAAS;IAErB,WAAW,CAAS;IAEX,KAAK,CAAQ;IAEb,SAAS,CAAQ;IAEjB,MAAM,CAAc;IAEpB,OAAO,CAAqB;IAE5B,WAAW,CAAc;IAEzB,WAAW,CAAgB;IAE3B,cAAc,CAAgB;IAE9B,SAAS,CAA8E;IAEvF,QAAQ,CAAO;IAExB,IAAI,IAAI,KAAK,OAAO,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IAElD,IAAI,SAAS,KAAK,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;IAErD,IAAI,aAAa,KAAK,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;IAEzD,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;IACrF,CAAC;IAED,IAAI,UAAU;QACZ,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;IAClG,CAAC;IAED,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAA;IAChD,CAAC;IAED,IAAI,aAAa;QACf,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC;IAC7F,CAAC;IAED,IAAI,YAAY;QACd,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,GAAG,KAAK,CAAC,WAAW,CAAC,CAAC;IAC5F,CAAC;IAED,SAAS,CAAgB;IAEzB,YAAY,OAAmB;QAC7B,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;QAC3B,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;QACzB,IAAI,CAAC,QAAQ,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;QACzB,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAA;QAC3B,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAA;QAC3B,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;QACjC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACtC,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAA;QAC3C,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC;QACjC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;QACnC,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;QACzB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC;QAElD,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,kBAAkB,CAAC;QAErD,IAAI,cAAc,IAAI,OAAO,IAAI,OAAO,CAAC,YAAY,IAAI,IAAI;YAC3D,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;aACtC,IAAI,aAAa,IAAI,OAAO,IAAI,OAAO,CAAC,WAAW,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY;YACpF,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;;YAEvC,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,QAAQ,CAAC;QAEtC,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClC,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QAC1B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;QAC5C,IAAI,CAAC,SAAS,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACrC,IAAI,CAAC,IAAI,CAAC,SAAS;YACjB,MAAM,IAAI,KAAK,CAAC,oCAAoC,OAAO,CAAC,IAAI,IAAI,GAAG,OAAO,CAAC,QAAQ,IAAI,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;QACpH,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC1C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAChD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC1C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QACjC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;IACpC,CAAC;IAED,aAAa;QACX,MAAM,CACJ,EAAE,KAAK,EAAE,IAAI,EAAE,EACf,EAAE,KAAK,EAAE,MAAM,EAAE,EACjB,EAAE,KAAK,EAAE,MAAM,EAAE,EACjB,EAAE,KAAK,EAAE,YAAY,EAAE,EACxB,GAAG,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE;YACvC,IAAI,EAAE,SAAS;YACf,MAAM,EAAE,SAAS;YACjB,MAAM,EAAE,SAAS;YACjB,YAAY,EAAE,MAAM;SACrB,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC;QAC9D,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;QAC1D,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC;IAC3D,CAAC;IAED,YAAY;QACV,MAAM,KAAK,GAAG,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAS;YACjC,OAAO,IAAI,cAAc,CACvB,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,SAAS,EACd,KAAK,EAAE,SAAS,EAAE,EAClB,KAAK,EAAE,OAAO,EAAE,EAChB,KAAK,EAAE,OAAO,EAAE,EAChB,KAAK,EAAE,cAAc,EAAE,EACvB,KAAK,EAAE,QAAQ,EAAE,CAClB,CAAC;;YAEF,OAAO,KAAK,CAAA;IAChB,CAAC;IAED,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK;QAC3B,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;QAChC,oEAAoE;QACpE,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;QACnE,MAAM,GAAG,GAAG,KAAK,CAAC;QAClB,MAAM,EAAE,WAAW,EAAE,YAAY,EAAE,GAAG,IAAI,CAAC;QAC3C,OAAO,cAAc,CAAC,QAAQ,CAAC;YAC7B,QAAQ;YACR,KAAK,EAAE,GAAG;YACV,cAAc,EAAE,IAAI;YACpB,kBAAkB,EAAE,EAAE;YACtB,WAAW;YACX,YAAY;YACZ,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;YAC9B,MAAM;YACN,MAAM,EAAE,IAAI;YACZ,IAAI,EAAE,IAAI;YACV,gBAAgB,EAAE,IAAI;YACtB,KAAK,EAAE,IAAI;YACX,cAAc,EAAE,IAAI;YACpB,aAAa,EAAE;gBACb,OAAO,EAAE,IAAI;gBACb,UAAU,EAAE,CAAC;gBACb,UAAU,EAAE,IAAI;aACjB;SACF,CAAC,CAAC;IACL,CAAC;IAED,eAAe;QACb,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC;IAC3B,CAAC;IAED,kBAAkB;QAChB,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5C,CAAC;IAED,eAAe;QACb,OAAO,IAAI,WAAW,CACpB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,EAC5B,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,EAC7B,IAAI,CAAC,QAAQ,CACd,CAAC;IACJ,CAAC;IAED,WAAW;QACT,IAAI,MAAmB,CAAC;QACxB,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACvB,OAAO,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAC3D,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACvB,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,kCAAkC;IAClC,WAAW;QACT,IAAI,KAAK,GACP,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;QAC/G,IAAI,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;QAClE,OAAO,CAAC,QAAQ,EAAE;YAChB,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACrB,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;SAC/D;QAED,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,EAAE,CAAC;QAC5C,IAAI,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAA;QACxE,IAAI,CAAC,QAAQ;YACX,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAA;QAE7E,OAAO;YACL,UAAU;YACV,QAAQ;YACR,QAAQ;SACT,CAAC;IACJ,CAAC","sourcesContent":["import {\n  type Event as HebCalEvent,\n  HDate,\n  HebrewCalendar,\n  Location as HebCalLocation,\n  Zmanim,\n  ParshaEvent,\n  CandleLightingEvent,\n  HavdalahEvent,\n} from '@hebcal/core';\n\n/**\n * Holiday flags for Event.\n * copied from hebcal src because i hate typescript sometimes\n * @readonly\n * @enum {number}\n */\nconst flags = {\n  /** Chag, yontiff, yom tov */\n  CHAG: 0x000001,\n  /** Light candles 18 minutes before sundown */\n  LIGHT_CANDLES: 0x000002,\n  /** End of holiday (end of Yom Tov)  */\n  YOM_TOV_ENDS: 0x000004,\n  /** Observed only in the Diaspora (chutz l'aretz)  */\n  CHUL_ONLY: 0x000008,\n  /** Observed only in Israel */\n  IL_ONLY: 0x000010,\n  /** Light candles in the evening at Tzeit time (3 small stars) */\n  LIGHT_CANDLES_TZEIS: 0x000020,\n  /** Candle-lighting for Chanukah */\n  CHANUKAH_CANDLES: 0x000040,\n  /** Rosh Chodesh, beginning of a new Hebrew month */\n  ROSH_CHODESH: 0x000080,\n  /** Minor fasts like Tzom Tammuz, Ta'anit Esther, ... */\n  MINOR_FAST: 0x000100,\n  /** Shabbat Shekalim, Zachor, ... */\n  SPECIAL_SHABBAT: 0x000200,\n  /** Weekly sedrot on Saturdays */\n  PARSHA_HASHAVUA: 0x000400,\n  /** Daily page of Talmud (Bavli) */\n  DAF_YOMI: 0x000800,\n  /** Days of the Omer */\n  OMER_COUNT: 0x001000,\n  /** Yom HaShoah, Yom HaAtzma'ut, ... */\n  MODERN_HOLIDAY: 0x002000,\n  /** Yom Kippur and Tish'a B'Av */\n  MAJOR_FAST: 0x004000,\n  /** On the Saturday before Rosh Chodesh */\n  SHABBAT_MEVARCHIM: 0x008000,\n  /** Molad */\n  MOLAD: 0x010000,\n  /** Yahrzeit or Hebrew Anniversary */\n  USER_EVENT: 0x020000,\n  /** Daily Hebrew date (\"11th of Sivan, 5780\") */\n  HEBREW_DATE: 0x040000,\n  /** A holiday that's not major, modern, rosh chodesh, or a fast day */\n  MINOR_HOLIDAY: 0x080000,\n  /** Evening before a major or minor holiday */\n  EREV: 0x100000,\n  /** Chol haMoed, intermediate days of Pesach or Sukkot */\n  CHOL_HAMOED: 0x200000,\n  /** Mishna Yomi */\n  MISHNA_YOMI: 0x400000,\n  /** Yom Kippur Katan, minor day of atonement on the day preceeding each Rosh Chodesh */\n  YOM_KIPPUR_KATAN: 0x800000,\n  /** Daily page of Jerusalem Talmud (Yerushalmi) */\n  YERUSHALMI_YOMI: 0x1000000,\n  /** Nach Yomi */\n  NACH_YOMI: 0x2000000\n};\n\nexport type ZmanimKey = typeof DailyZmanim.ZMANIM_KEYS[number];\n\nexport type ZmanimI18nKeys =\n  Record<ZmanimKey, string>;\n\nexport interface I18nKeys extends ZmanimI18nKeys {\n  shabbat: string;\n  chag: string;\n  zmanei: string;\n  yom: string;\n  and: string;\n  zmaneiTefillah: string;\n  days: string[];\n}\n\ninterface HebCalInitBase {\n  debug?: boolean;\n  date: Date,\n  city: string;\n  locale: string;\n  latitude: number;\n  longitude: number;\n  tzeitDeg: number;\n  candleLightingMins: number,\n}\n\nexport type HebCalInit = HebCalInitBase & ({\n  havdalahMins: number,\n} | {\n  havdalahDeg: number,\n});\n\nexport interface CandleLightingInfo {\n  categories: string[];\n  lighting: CandleLightingEvent;\n  havdalah: HavdalahEvent\n}\n\nexport interface ZmanInfo {\n  date: Date,\n  past: boolean,\n  next: boolean,\n}\n\nfunction isParshaEvent(x: HebCalEvent): x is ParshaEvent {\n  return x instanceof ParshaEvent;\n}\n\nfunction isCandleLightingEvent(x: HebCalEvent): x is CandleLightingEvent {\n  return x instanceof CandleLightingEvent;\n}\n\nfunction isHavdalahEvent(x: HebCalEvent): x is HavdalahEvent {\n  return x instanceof HavdalahEvent;\n}\n\n\nconst THREE_MEDIUM_STARS = 7.083;\n\nconst THREE_SMALL_STARS = 8.5;\n\nclass DailyZmanim {\n  static readonly ZMANIM_KEYS = [\n    'alotHaShachar',\n    'misheyakir',\n    'sunrise',\n    'sofZmanShmaMGA',\n    'sofZmanShma',\n    'sofZmanTfillaMGA',\n    'sofZmanTfilla',\n    'minchaGedola',\n    'minchaKetana',\n    'plagHaMincha',\n    'sunset',\n    'tzeit',\n  ] as const;\n\n  readonly alotHaShachar: Date;\n\n  readonly misheyakir: Date;\n\n  readonly sunrise: Date;\n\n  readonly sofZmanShmaMGA: Date;\n\n  readonly sofZmanShma: Date;\n\n  readonly sofZmanTfillaMGA: Date;\n\n  readonly sofZmanTfilla: Date;\n\n  readonly minchaGedola: Date;\n\n  readonly minchaKetana: Date;\n\n  readonly plagHaMincha: Date;\n\n  readonly sunset: Date;\n\n  readonly tzeit: Date;\n\n  #keys = new Map<ZmanimKey, ZmanInfo>();\n\n  constructor(\n    now: Date,\n    lat: number,\n    long: number,\n    tzeitDeg = THREE_MEDIUM_STARS,\n  ) {\n    const zmanim = new Zmanim(now, lat, long);\n    let lastSeenIsPast = false\n    for (const key of DailyZmanim.ZMANIM_KEYS) {\n      const date = zmanim[key](...key === 'tzeit' ? [tzeitDeg] : []);\n      const past = date < now;\n      const next = lastSeenIsPast && !past;\n      lastSeenIsPast = past && !next\n      this.#keys.set(key, { date, past, next });\n    }\n  }\n\n  get(key: ZmanimKey) { return this.#keys.get(key)?.date; }\n\n  isPast(key: ZmanimKey) { return this.#keys.get(key)?.past; }\n\n  isNext(key: ZmanimKey) { return this.#keys.get(key)?.next; }\n\n  map<A>(fn: (\n    x?: ZmanInfo & { key: ZmanimKey },\n    i?: number,\n    a?: (ZmanInfo & { key: ZmanimKey })[],\n  ) => A): A[] {\n    return Array.from(\n      this.#keys.entries(),\n      ([key, { date, next, past }]) => ({ key, date, next, past }),\n    ).map(fn);\n  }\n}\n\nexport class HebCalDay {\n  static readonly i18n: Record<string, I18nKeys> = {\n    'he-IL': {\n      alotHaShachar: 'עלות השחר',\n      misheyakir: 'משיכיר',\n      sunrise: 'נץ',\n      sofZmanShmaMGA: 'סזק״ש (מג״א)',\n      sofZmanShma: 'סזק״ש (גר״א)',\n      sofZmanTfillaMGA: 'ס״ז תפילה (מג״א)',\n      sofZmanTfilla: 'ס״ז תפילה (גר״א)',\n      sunset: 'שקיעה',\n      minchaGedola: 'מנחה גדולה',\n      minchaKetana: 'מנחה קטנה',\n      plagHaMincha: 'פלג המנחה',\n      tzeit: 'צאת הכוכבים',\n      shabbat: 'שבת',\n      chag: 'יום טוב',\n      zmanei: 'זמני',\n      yom: 'יום',\n      and: 'ו',\n      zmaneiTefillah: 'זמני תפילה',\n      days: [\n        'יום ראשון',\n        'יום שני',\n        'יום שלישי',\n        'יום רביעי',\n        'יום חמישי',\n        'יום שישי',\n        'יום שבת קודש',\n      ]\n    },\n    'en-US': {\n      alotHaShachar: 'dawn',\n      misheyakir: 'misheyakir',\n      sunrise: 'sunrise',\n      sofZmanShmaMGA: 'Latest Shema (Gr\"a)',\n      sofZmanShma: 'Latest Shema (Magen Avraham)',\n      sofZmanTfillaMGA: 'Latest Tefillah (Gr\"a)',\n      sofZmanTfilla: 'Latest Tefillah (Magen Avraham)',\n      sunset: 'sunset',\n      minchaGedola: 'mincha gedola',\n      minchaKetana: 'mincha ketana',\n      plagHaMincha: 'plag hamincha',\n      tzeit: 'nightfall',\n      shabbat: 'Shabbat',\n      chag: 'Yom Tov',\n      zmanei: 'Halachic Times for',\n      yom: 'Today',\n      and: 'and ',\n      zmaneiTefillah: 'Prayer times',\n      days: [\n        'Sunday',\n        'Monday',\n        'Tuesday',\n        'Wednesday',\n        'Thursday',\n        'Friday',\n        'Shabbat',\n      ]\n    }\n  }\n\n  static {\n    this.i18n.he = this.i18n['he-IL'];\n    this.i18n.en = this.i18n['en-US'];\n    this.i18n['en-GB'] = this.i18n['en-US'];\n  }\n\n  debug = false;\n\n  date: Date;\n\n  locale = 'he-IL';\n\n  city: string;\n\n  latitude: number;\n\n  longitude: number;\n\n  tzeitDeg = THREE_SMALL_STARS;\n\n  candleLightingMins: number;\n\n  havdalahMins: number;\n\n  havdalahDeg: number;\n\n  readonly hDate: HDate;\n\n  readonly nextHDate: HDate;\n\n  readonly parsha: ParshaEvent;\n\n  readonly candles: CandleLightingInfo;\n\n  readonly dailyZmanim: DailyZmanim;\n\n  readonly eventsToday: HebCalEvent[];\n\n  readonly eventsTomorrow: HebCalEvent[];\n\n  readonly timeParts: Record<'hour' | 'minute' | 'second' | 'timeZoneName' | 'dayPeriod', string>;\n\n  readonly midnight: Date;\n\n  get i18n() { return HebCalDay.i18n[this.locale]; }\n\n  get isShabbat() { return this.hDate.getDay() === 6; }\n\n  get isErevShabbat() { return this.hDate.getDay() === 5; }\n\n  get isChag() {\n    return this.eventsToday.length && this.eventsToday.every(x => x.mask & flags.CHAG);\n  }\n\n  get isErevChag() {\n    return this.eventsToday.length && this.eventsToday.every(x => x.mask & flags.EREV & flags.CHAG);\n  }\n\n  get isWeekday() {\n    return this.hDate.getDay() < 6 && !this.isChag\n  }\n\n  get isRoshChodesh() {\n    return this.eventsToday.length && this.eventsToday.every(x => x.mask & flags.ROSH_CHODESH);\n  }\n\n  get isCholHamoed() {\n    return this.eventsToday.length && this.eventsToday.every(x => x.mask & flags.CHOL_HAMOED);\n  }\n\n  #location: HebCalLocation\n\n  constructor(options: HebCalInit) {\n    this.debug = options.debug;\n    this.date = options.date;\n    this.midnight = new Date(options.date);\n    this.midnight.setHours(0)\n    this.midnight.setMinutes(0)\n    this.midnight.setSeconds(0)\n    this.midnight.setMilliseconds(0);\n    this.timeParts = this.#getTimeParts();\n    this.locale = options.locale ?? this.locale\n    this.latitude = options.latitude;\n    this.longitude = options.longitude;\n    this.city = options.city;\n    this.tzeitDeg = options.tzeitDeg ?? this.tzeitDeg;\n\n    this.candleLightingMins = options.candleLightingMins;\n\n    if ('havdalahMins' in options && options.havdalahMins != null)\n      this.havdalahMins = options.havdalahMins;\n    else if ('havdalahDeg' in options && options.havdalahDeg != null && !this.havdalahMins)\n      this.havdalahDeg = options.havdalahDeg;\n    else\n      this.havdalahDeg = options.tzeitDeg;\n\n    this.hDate = new HDate(this.date);\n    const next = new Date(this.date)\n          next.setDate(this.date.getDate() + 1);\n    this.nextHDate = new HDate(next);\n    this.#location = this.#getLocation();\n    if (!this.#location)\n      throw new Error(`Could not determine location for ${options.city ?? `${options.latitude}/${options.longitude}`}`);\n    this.eventsToday = this.#getTodayEvents();\n    this.eventsTomorrow = this.#getTomorrowEvents();\n    this.dailyZmanim = this.#getDailyZmanim();\n    this.parsha = this.#getParshah();\n    this.candles = this.#getCandles();\n  }\n\n  #getTimeParts() {\n    const [\n      { value: hour },\n      { value: minute },\n      { value: second },\n      { value: timeZoneName },\n    ] = new Intl.DateTimeFormat(this.locale, {\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit',\n      timeZoneName: 'long',\n    }).formatToParts(this.date).filter(x => x.type !== 'literal');\n    const dayPeriod = this.date.getHours() < 12 ? 'am' : 'pm';\n    return { hour, minute, second, timeZoneName, dayPeriod };\n  }\n\n  #getLocation() {\n    const found = HebCalLocation.lookup(this.city);\n    if (this.latitude && this.longitude)\n      return new HebCalLocation(\n        this.latitude,\n        this.longitude,\n        found?.getIsrael(),\n        found?.getTzid(),\n        found?.getName(),\n        found?.getCountryCode(),\n        found?.getGeoId(),\n      );\n    else\n      return found\n  }\n\n  #getEvents(start = this.hDate): HebCalEvent[] {\n    const location = this.#location;\n    /** Hebcals' locale isn't an iso locale, but a pronunciation hint */\n    const locale = this.locale.match(/^(he|en)$/) ? this.locale : 'he';\n    const end = start;\n    const { havdalahDeg, havdalahMins } = this;\n    return HebrewCalendar.calendar({\n      location,\n      start, end,\n      candlelighting: true,\n      candleLightingMins: 40,\n      havdalahDeg,\n      havdalahMins,\n      il: this.locale.endsWith('IL'),\n      locale,\n      sedrot: true,\n      omer: true,\n      shabbatMevarchim: true,\n      molad: true,\n      yomKippurKatan: true,\n      dailyLearning: {\n        dafYomi: true,\n        yerushalmi: 2,\n        mishnaYomi: true,\n      }\n    });\n  }\n\n  #getTodayEvents(): HebCalEvent[] {\n    return this.#getEvents();\n  }\n\n  #getTomorrowEvents(): HebCalEvent[] {\n    return this.#getEvents(this.hDate.add(1));\n  }\n\n  #getDailyZmanim(): DailyZmanim {\n    return new DailyZmanim(\n      this.date,\n      this.#location.getLatitude(),\n      this.#location.getLongitude(),\n      this.tzeitDeg,\n    );\n  }\n\n  #getParshah(): ParshaEvent {\n    let parsha: ParshaEvent;\n    let check = this.hDate;\n    while (!(parsha = this.#getEvents(check).find(isParshaEvent)))\n      check = check.add(1);\n    return parsha;\n  }\n\n  // TODO: rosh hashannnah meshulash\n  #getCandles(): CandleLightingInfo {\n    let check =\n      this.isChag || this.isErevChag || this.isShabbat || this.isErevShabbat ? this.hDate.subtract(1) : this.hDate;\n    let lighting = this.#getEvents(check).find(isCandleLightingEvent);\n    while (!lighting) {\n      check = check.add(1);\n      lighting = this.#getEvents(check).find(isCandleLightingEvent);\n    }\n\n    const categories = lighting.getCategories();\n    let havdalah = this.#getEvents(lighting.getDate()).find(isHavdalahEvent)\n    if (!havdalah)\n      havdalah = this.#getEvents(lighting.getDate().add(1)).find(isHavdalahEvent)\n\n    return {\n      categories,\n      lighting,\n      havdalah,\n    };\n  }\n}\n\n"]}