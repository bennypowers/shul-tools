{"version":3,"file":"zmanei-tefillah.js","sourceRoot":"","sources":["zmanei-tefillah.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAC3B,OAAO,EAAE,iBAAiB,EAAE,MAAM,iBAAiB,CAAC;AACpD,OAAO,EAAE,aAAa,EAAE,MAAM,mBAAmB,CAAC;;;IAMrC,cAAc;4BAD1B,aAAa,CAAC,iBAAiB,CAAC;;;;sBACG,iBAAiB;8BAAzB,SAAQ,WAAiB;;;;YAArD,6KA2DC;;;;QA1DC,MAAM,CAAU,MAAM,GAAG,CAAC,GAAG,iBAAiB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QAE9D,GAAG,GAAG,IAAI,gBAAgB,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;QAEjD,iBAAiB;YACf,KAAK,CAAC,iBAAiB,EAAE,CAAC;YAC1B,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;QAC9C,CAAC;QAED,mBAAmB;YACjB,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;QACxB,CAAC;QAED,MAAM;YACJ,MAAM,EACJ,SAAS,EACT,MAAM,EACN,aAAa,EACb,YAAY,EACZ,SAAS,EACT,IAAI,EAAE,EACJ,cAAc,GACf,EACF,GAAG,IAAI,CAAC,KAAK,CAAC;YAEf,MAAM,QAAQ,GACV,YAAY,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,YAAY;gBACxC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ;oBACnB,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,SAAS;wBAC3B,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS;4BACvB,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS;gCACvB,CAAC,CAAC,OAAO,CAAC;YAEZ,OAAO,IAAI,CAAA;yBACU,cAAc,IAAI,EAAE;oBACzB,QAAQ;KACvB,CAAC;QACJ,CAAC;QAED,OAAO;YACL,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,EAAE;gBAChD,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;oBAClB,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC;oBAC5C,MAAM,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,CAAA;oBACjC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;wBACzB,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,UAAuB,CAAC,CAAC;wBACjE,IAAI,IAAI,EAAE;4BACR,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;4BACtB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,MAAM,GAAG,EAAE,GAAG,IAAI,CAAC,CAAA;4BACvD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;4BACnC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,CAAC;yBACvF;qBACF;iBACF;aACF;QACH,CAAC;;YAzDU,uDAAc;;;;;SAAd,cAAc","sourcesContent":["import { html } from 'lit';\nimport { HebcalDayConsumer } from './hebcal-day.js';\nimport { customElement } from 'lit/decorators.js';\n\nimport style from './zmanei-tefillah.css';\nimport type { ZmanimKey } from './HebCalDay.js';\n\n@customElement('zmanei-tefillah')\nexport class ZmaneiTefillah extends HebcalDayConsumer {\n  static readonly styles = [...HebcalDayConsumer.styles, style];\n\n  #mo = new MutationObserver(() => this.#update());\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.#update();\n    this.#mo.observe(this, { childList: true });\n  }\n\n  disconectedCallback() {\n    this.#mo.disconnect();\n  }\n\n  render() {\n    const {\n      isShabbat,\n      isChag,\n      isRoshChodesh,\n      isCholHamoed,\n      isWeekday,\n      i18n: {\n        zmaneiTefillah,\n      }\n    } = this.hayom;\n\n    const openSlot =\n        isCholHamoed && !isChag ? 'cholhamoed'\n      : isChag ? 'yomtov'\n      : isRoshChodesh ? 'chodesh'\n      : isShabbat ? 'shabbat'\n      : isWeekday ? 'weekday'\n      : 'error';\n\n    return html`\n      <h2 id=\"heading\">${zmaneiTefillah ?? ''}</h2>\n      <slot name=\"${openSlot}\"></slot>\n    `;\n  }\n\n  #update() {\n    for (const time of this.querySelectorAll('time')) {\n      if (!time.dateTime) {\n        const { offset, offsetFrom } = time.dataset;\n        const parsed = parseFloat(offset)\n        if (!Number.isNaN(parsed)) {\n          const from = this.hayom.dailyZmanim.get(offsetFrom as ZmanimKey);\n          if (from) {\n            const date = new Date(from);\n                  date.setTime(date.getTime() + parsed * 60 * 1000)\n            time.dateTime = date.toISOString();\n            time.textContent = date.toLocaleTimeString(this.hayom.locale, { timeStyle: 'short' });\n          }\n        }\n      }\n    }\n  }\n\n}\n\n"]}