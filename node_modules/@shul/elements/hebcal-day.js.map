{"version":3,"file":"hebcal-day.js","sourceRoot":"","sources":["hebcal-day.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html } from 'lit';\nimport { customElement, property, state } from 'lit/decorators.js';\n\nimport { consume, createContext, provide } from '@lit/context';\n\nimport { observes } from './lib/decorators.js';\n\nimport { HebCalDay } from './HebCalDay.js';\n\nimport sharedStyles from './shared.css'\n\nimport styles from './hebcal-day.css';\n\nimport childStyles from './hebcal-consumer.css';\nimport { ClockController } from './lib/ClockController.js';\nimport { DateConverter } from './lib/DateConverter.js';\n\nconst context = createContext<HebCalDay>('hebcal');\n\n@customElement('hebcal-day')\nexport class HebcalDay extends LitElement {\n  static styles = [sharedStyles, styles];\n\n  /**\n   * Locale for translating strings.\n   * Currently, `he-IL` and `en-US` are supported.\n   */\n  @property()\n  accessor locale = 'he-IL'\n\n  /**\n   * City whence to lookup zmanim\n   * @see https://github.com/hebcal/hebcal-es6/tree/main#locationlookupname--location\n   */\n  @property()\n  accessor city = 'Jerusalem';\n\n  /** setting latitude and longitude overrides `city` */\n  @property({ type: Number })\n  accessor latitude: number | undefined;\n\n  /** setting latitude and longitude overrides `city` */\n  @property({ type: Number })\n  accessor longitude: number | undefined;\n\n  /**\n   * Angle at which to establish nightfall\n   * @see https://github.com/hebcal/hebcal-es6/tree/main#zmanimtzeitangle--date\n   */\n  @property({\n    type: Number,\n    attribute: 'tzeit-degrees',\n  }) accessor tzeitDegrees: number | undefined;\n\n  /**\n   * Number of minutes before *shkia* when Shabbat candles are lit.\n   * Customarily 18 minutes outside of Jerusalem, and 40 minutes in Jerusalem\n   */\n  @property({\n    type: Number,\n    attribute: 'candle-lighting-minutes-before-sunset',\n  }) accessor candleLightingMinutesBeforeSunset: 18 | 40;\n\n  /**\n   * Number of minutes after sunset when Shabbat is customarily ended.\n   */\n  @property({\n    type: Number,\n    attribute: 'havdalah-minutes-after-sunset',\n  }) accessor havdalahMinutesAfterSunset = 0;\n\n  @property({\n    type: Number,\n    attribute: 'havdalah-degrees',\n  }) accessor havdalahDegrees = 0;\n\n  /**\n   * When set, hebcal elements will display information for the specific date\n   */\n  @property({\n    converter: DateConverter,\n    reflect: true,\n    attribute: 'specific-date',\n  }) accessor specificDate: Date | undefined;\n\n  /** @internal */\n  #clock = new ClockController(this, '#clock' as keyof HebcalDay);\n\n  @property({ reflect: true, type: Boolean })\n  accessor debug = false;\n\n  /**\n   * Shared object representing the current (or selected) Hebrew calendar day\n   */\n  @state()\n  @provide({ context })\n  accessor hayom = this.#getHebcalDay();\n\n  get date() { return this.#clock.date; }\n  set date(date: Date) { this.#clock.set(date); }\n\n  override render() {\n    return html`\n      <slot></slot>\n    `;\n  }\n\n  @observes('specificDate') #debugDateChanged(old: { specificDate?: Date }) {\n    if (old.specificDate && !this.specificDate) {\n      this.#clock.reset();\n      this.#clock.start();\n    } else {\n      this.#clock.stop();\n      this.#clock.set(this.specificDate);\n      this.requestUpdate('#clock' as keyof HebcalDay, old.specificDate);\n    }\n  }\n\n  @observes(\n    '#clock' as keyof HebcalDay,\n    'candleLightingMinutesBeforeSunset',\n    'date',\n    'debug',\n    'havdalahDegrees',\n    'havdalahMinutesAfterSunset',\n    'tzeitDegrees',\n  ) #dateChanged() {\n    this.hayom = this.#getHebcalDay();\n  }\n\n  #getHebcalDay() {\n    const {\n      date, debug,\n      city, longitude, latitude, locale,\n      tzeitDegrees,\n      candleLightingMinutesBeforeSunset,\n    } = this;\n    const havdalahMins = this.havdalahMinutesAfterSunset || undefined;\n    const havdalahDeg = this.havdalahDegrees || undefined;\n    return new HebCalDay({\n      date,\n      debug,\n      city, locale,\n      latitude, longitude,\n\n      tzeitDeg: tzeitDegrees,\n      candleLightingMins: candleLightingMinutesBeforeSunset,\n      havdalahMins,\n      havdalahDeg,\n    });\n  }\n}\n\nexport class HebcalDayConsumer extends LitElement {\n  static styles = [sharedStyles, childStyles];\n\n  /**\n   * Shared object representing the current (or selected) Hebrew calendar day\n   */\n  @consume({ context, subscribe: true })\n  accessor hayom: HebCalDay;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'hebcal-day': HebcalDay;\n  }\n}\n"]}